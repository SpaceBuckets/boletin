"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.createVueSupabase = exports.VueSupabaseClient = void 0;
// @ts-ignore
const vue_demi_1 = require("vue-demi");
const supabase_js_1 = require("@supabase/supabase-js");
const symbol_1 = __importDefault(require("./symbol"));
class VueSupabaseClient extends supabase_js_1.SupabaseClient {
    constructor(supabaseUrl, supabaseKey, supabaseOptions) {
        super(supabaseUrl, supabaseKey, supabaseOptions);
    }
    install(app) {
        const self = this;
        if (vue_demi_1.isVue3) {
            app.provide(symbol_1.default, self);
            Object.defineProperty(app.config.globalProperties, "$supabase", {
                get: () => self,
                configurable: true,
            });
        }
        else {
            app.mixin({
                provide: () => ({
                    [symbol_1.default]: self,
                }),
            });
            Object.defineProperty(app.prototype, "$supabase", {
                get: () => self,
                configurable: true,
            });
            app.$supabase = self;
        }
    }
}
exports.VueSupabaseClient = VueSupabaseClient;
function createVueSupabase({ supabaseUrl, supabaseKey, supabaseOptions, }) {
    return new VueSupabaseClient(supabaseUrl, supabaseKey, supabaseOptions);
}
exports.createVueSupabase = createVueSupabase;
//# sourceMappingURL=VueSupabaseClient.js.map